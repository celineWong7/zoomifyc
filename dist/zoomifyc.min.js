/*! Zoomifyc - v0.1.1 - https://github.com/celineWong7/zoomifyc - (c) 2020 Wang Xiaolin - MIT */

var zoomifyc={};zoomifyc={curImage:null,curIndex:0,allImage:null,_img:null,_content:null,_zoomed:!1,rotate:0,scale:1,isGrag:!1,init:function(o){zoomifyc.createWrap(),(zoomifyc.allImage=o).addClass("zoomifyc").on("click",function(o){zoomifyc.curImage=$(this),zoomifyc.curIndex=zoomifyc.allImage.index(zoomifyc.curImage),zoomifyc.showWrap(zoomifyc.curImage.attr("src"))}),$(window).on("resize",function(){zoomifyc.reposition()}),$(document).on("scroll",function(){zoomifyc.reposition()}),$(window).on("keyup",function(o){27==o.keyCode&&zoomifyc.hideWrap()}),$(document).on("keydown",function(o){o=o||window.event,zoomifyc._preventDefault(o),o.keyCode&&(console.log(o.keyCode),37==o.keyCode&&zoomifyc.prev(),39==o.keyCode&&zoomifyc.next(),38==o.keyCode&&zoomifyc.biggerImage(),40==o.keyCode&&zoomifyc.smallerImage())}),zoomifyc.initMouseScroll()},reset:function(){zoomifyc._zoomed=!1,zoomifyc.rotate=0,zoomifyc.rotateCss()},createWrap:function(){if(!(0<$("#zoomifycWrap").length)){var o=$('<div id="zoomifycWrap" style="display:none;"></div>'),i=$('<div class="zoomifyc-shadow"></div>'),e=$('<div class="zoomifyc-content"></div>'),c=$('<span class="zoomifyc-close">x</span>'),t=$('<div class="zoomifyc-switch"></div>'),n=$('<span class="prev">&lt;</span>'),a=$('<span class="next">&gt;</span>'),m=$('<div class="zoomifyc-imgbox"></div>'),A=$('<img class="zoomifyc-img" src="" >');$tools=$('<div class="zoomifyc-tools"></div>'),$prev2=$('<span class="prev" title="上一张">&lt;</span>'),$next2=$('<span class="next" title="下一张">&gt;</span>'),$leftRotate=$('<span class="left-rotate" title="左旋90°"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAUCAYAAABroNZJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAABJUlEQVQ4y6WRsSuEcRjHP897KEqmK5NSJ4tISdkswmJQJhOjyWJisZoNyj8gpbNYLP4Hug2L4VJM5wYpH4M3vXfdubv3vuPzfJ/P7/k+P+ggdbiTp6PUO3VPHegHcu+vKupaL4OJupRuULVRF+pg1p80DYe6C9wCy8Az8JGxlIGjiPhq9/qQeqnuZ/OncSrqSjcRztXVFvWNro6qrqvHua+fQq7V0bzziVoEahFRyw0BZoCHfpIkwAiN35gL8gqM5xlWD9XFJI0ym3OJBaCSRMQn8KaWetxiEqhHRP2voJbVQpeAUK/UqebGlnrWCaQW1FN1u51hU71R59v059L+TrYeLYwTwAEwDTwC78AYUAKegJOIePkXks3N79cXU1A1Ir5beX8AuajeueMcwmIAAAAASUVORK5CYII="></span>'),$rightRotate=$('<span class="right-rotate" title="右旋90°"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAUCAYAAABroNZJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAABJUlEQVQ4y6WRsSuEcRjHP897KEqmK5NSJ4tISdkswmJQJhOjyWJisZoNyj8gpbNYLP4Hug2L4VJM5wYpH4M3vXfdubv3vuPzfJ/P7/k+P+ggdbiTp6PUO3VPHegHcu+vKupaL4OJupRuULVRF+pg1p80DYe6C9wCy8Az8JGxlIGjiPhq9/qQeqnuZ/OncSrqSjcRztXVFvWNro6qrqvHua+fQq7V0bzziVoEahFRyw0BZoCHfpIkwAiN35gL8gqM5xlWD9XFJI0ym3OJBaCSRMQn8KaWetxiEqhHRP2voJbVQpeAUK/UqebGlnrWCaQW1FN1u51hU71R59v059L+TrYeLYwTwAEwDTwC78AYUAKegJOIePkXks3N79cXU1A1Ir5beX8AuajeueMcwmIAAAAASUVORK5CYII="></span>'),m.append(c,A),t.append(n,a),$tools.append($prev2,$next2,$leftRotate,$rightRotate),e.append(t,$tools,m),o.append(i,e),$("body").append(o),zoomifyc._content=e,zoomifyc._img=A,i.on("click",zoomifyc.hideWrap),c.on("click",zoomifyc.hideWrap),n.on("click",zoomifyc.prev),$prev2.on("click",zoomifyc.prev),a.on("click",zoomifyc.next),$next2.on("click",zoomifyc.next),$leftRotate.on("click",function(){zoomifyc.rotate-=90,zoomifyc.rotateCss()}),$rightRotate.on("click",function(){zoomifyc.rotate+=90,zoomifyc.rotateCss()})}},hideWrap:function(){$("#zoomifycWrap").hide(),$("#zoomifycWrap .zoomifyc-img").attr("src","")},showWrap:function(o){zoomifyc.reset(),zoomifyc._zoomed=!0,$("#zoomifycWrap").show(),$("#zoomifycWrap .zoomifyc-img").attr("src",o),zoomifyc.calSizeAndPosition(),0==zoomifyc.curIndex?$(".zoomifyc-switch .prev").hide():$(".zoomifyc-switch .prev").show(),zoomifyc.curIndex==zoomifyc.allImage.length-1?$(".zoomifyc-switch .next").hide():$(".zoomifyc-switch .next").show()},reposition:function(){zoomifyc._zoomed&&zoomifyc.calSizeAndPosition()},prev:function(){0!=zoomifyc.curIndex&&zoomifyc.allImage.eq(zoomifyc.curIndex-1).trigger("click")},next:function(){zoomifyc.curIndex!=zoomifyc.allImage.length-1&&zoomifyc.allImage.eq(zoomifyc.curIndex+1).trigger("click")},calSizeAndPosition:function(){var o=zoomifyc.curImage,i=o[0].naturalWidth||1/0,e=o[0].naturalHeight||1/0,c=$(window).width(),t=$(window).height(),n=Math.min(i,.98*c)/i,a=Math.min(e,.98*t)/e,m=Math.min(n,a);zoomifyc.setCss("scale("+m+")",i*m,e*m)},setCss:function(o,i,e){$("#zoomifycWrap .zoomifyc-imgbox").css({width:i,height:e}),$("#zoomifycWrap .zoomifyc-content").css({height:$(window).height(),top:$(document).scrollTop()})},setImgScale:function(o){o&&(zoomifyc.scale=o),zoomifyc._img.css({transform:"scale("+zoomifyc.scale+")","transform-origin":"center center"})},rotateCss:function(){zoomifyc.setImgScale(1);var o="rotate("+zoomifyc.rotate+"deg)";$("#zoomifycWrap .zoomifyc-imgbox").css({"-webkit-transform":o,"-moz-transform":o,"-ms-transform":o,"-o-transform":o,transform:o,"transform-origin":"center center"})},initMouseScroll:function(){var o=-1<navigator.userAgent.indexOf("Firefox")?"DOMMouseScroll":"mousewheel";function i(o){zoomifyc._preventDefault(o),0<parseInt(o.wheelDelta||-o.detail)?zoomifyc.biggerImage():zoomifyc.smallerImage()}document.attachEvent?zoomifyc._content[0].attachEvent("on"+o,function(o){i(o)}):document.addEventListener&&zoomifyc._content[0].addEventListener(o,function(o){i(o)},!1)},biggerImage:function(){zoomifyc._img=$(".zoomifyc-img"),zoomifyc.scale+=.1,15<=zoomifyc.scale?zoomifyc.scale=15:(zoomifyc.setImgScale(),$(window).height()<=zoomifyc._img.height()*zoomifyc.scale||($(window).width(),zoomifyc._img.width(),zoomifyc.scale))},smallerImage:function(){zoomifyc.scale-=.1,zoomifyc.scale<=.1?zoomifyc.scale=.1:zoomifyc.setImgScale()},_preventDefault:function(o){return o&&o.preventDefault?o.preventDefault():window.event.returnValue=!1,!1}};